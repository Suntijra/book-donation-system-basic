<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Home</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/icon-1.png" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Saira:wght@500;600;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status"></div>
    </div>
    <!-- Spinner End -->


    <!-- Navbar Start -->
    <div class="container-fluid fixed-top px-0 wow fadeIn" data-wow-delay="0.1s">
        <nav class="navbar navbar-expand-lg navbar-dark py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
            <a href="index.html" class="navbar-brand ms-4 ms-lg-0">
                <h1 class="fw-bold text-primary m-0">Book<span class="text-white">Donation</span></h1>
            </a>
            <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto p-4 p-lg-0">
                    <a href="home.html" class="nav-item nav-link active">Home</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                        <div class="dropdown-menu m-0">
                            <a href="donate.html" class="dropdown-item">ติดต่อเพื่อบริจาค/ขอรับบริจาค</a>
                            <!-- <a href="percent.html" class="dropdown-item">สถิติ</a> -->
                            <a href="donation.html" class="dropdown-item">บริจาค</a>
                        </div>
                    </div>
                    <a href="login.html" class="nav-item nav-link">Log out</a>
                </div>
            </div>
        </nav>
    </div>
    <!-- Navbar End -->


    <!-- Carousel Start -->
    <div class="container-fluid p-0 mb-5">
        <div id="header-carousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="w-100" src="img/3.png" alt="Image" height="855">
                    <div class="carousel-caption">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Carousel End -->


    <!-- About Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="position-relative overflow-hidden h-100" style="min-height: 400px;">
                        <img class="position-absolute w-100 h-100 pt-5 pe-5" src="img/5.jpg" alt=""
                            style="object-fit: cover;">
                        <img class="position-absolute top-0 end-0 bg-white ps-2 pb-2" src="img/1.jpg" alt=""
                            style="width: 230px; height: 190px;">
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="h-100">
                        <div class="d-inline-block rounded-pill bg-secondary text-primary py-1 px-3 mb-3">About Us</div>
                        <h1 class="display-6 mb-5">We Help People In Need Around The World</h1>
                        <div class="bg-light border-bottom border-5 border-primary rounded p-4 mb-4">
                            <p class="text-dark mb-2">Aliqu diam amet diam et eos. Clita erat ipsum et lorem sed stet
                                lorem sit clita duo justo erat amet</p>
                            <span class="text-primary">Jhon Doe, Founder</span>
                        </div>
                        <p class="mb-5">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet
                            diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna
                            dolore erat amet</p>
                        <a class="btn btn-primary py-2 px-3 me-3" href="donate.html">
                            ผู้บริจาค
                            <div class="d-inline-flex btn-sm-square bg-white text-primary rounded-circle ms-2">
                                <i class="fa fa-arrow-right"></i>
                            </div>
                        </a>
                        <a class="btn btn-outline-primary py-2 px-3" href="donate.html">
                            ผู้รับบริจาค
                            <div class="d-inline-flex btn-sm-square bg-primary text-white rounded-circle ms-2">
                                <i class="fa fa-arrow-right"></i>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- About End -->
    <div class="row">
        <div class="col-md-12">
            <h2>chart data </h2>
        </div>
    </div>
    <!-- /. ROW  -->
    <hr />
    <div style="width: 100%;
    display: flex;
    justify-content: center;
    height: 70vh;
    flex-direction: column;
    align-items: center;">

        <canvas id="pieChart"></canvas>

    </div>
    <div style="display: flex; justify-content: center; flex-direction: column;">
        <span>หนังสือทั้งหมด : <span id="all">1</span></span>
        <span>หนังสือรับเข้า : <span id="b1">1</span></span>
        <span>หนังสือรับออก : <span id="b2">1</span></span>
        <span>หนังสือวรสาร : <span id="b3">1</span></span>
        <span>หนังสือทั่วไป : <span id="b4">1</span></span>

    </div>
    <!-- Testimonial Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <div class="d-inline-block rounded-pill bg-secondary text-primary py-1 px-3 mb-3">Testimonial</div>
                <h1 class="display-6 mb-5">Trusted By Thousands Of People And Nonprofits</h1>
            </div>
            <div class="owl-carousel testimonial-carousel wow fadeInUp" data-wow-delay="0.1s">

                <div class="testimonial-item text-center"
                    style="background: url('/img/4.png');height: 300px;background-size: contain; background-repeat: no-repeat;">
                    <!-- <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/4.png" style="width: 100px; height: 100px;"> -->
                    <!-- <div class="testimonial-text rounded text-center p-4"> -->
                    <!-- <p>Clita clita tempor justo dolor ipsum amet kasd amet duo justo duo duo labore sed sed. Magna ut diam sit et amet stet eos sed clita erat magna elitr erat sit sit erat at rebum justo sea clita.</p>
                        <h5 class="mb-1">Doner Name</h5>
                        <span class="fst-italic">Profession</span> -->
                    <!-- </div> -->
                </div>
                <div class="testimonial-item text-center"
                    style="background: url('/img/5.png');height: 300px;background-size: contain; background-repeat: no-repeat;">
                    <!-- <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/4.png" style="width: 100px; height: 100px;"> -->
                    <!-- <div class="testimonial-text rounded text-center p-4"> -->
                    <!-- <p>Clita clita tempor justo dolor ipsum amet kasd amet duo justo duo duo labore sed sed. Magna ut diam sit et amet stet eos sed clita erat magna elitr erat sit sit erat at rebum justo sea clita.</p>
                        <h5 class="mb-1">Doner Name</h5>
                        <span class="fst-italic">Profession</span> -->
                    <!-- </div> -->
                </div>
                <div class="testimonial-item text-center"
                    style="background: url('/img/6.png');height: 300px;background-size: contain; background-repeat: no-repeat;">
                    <!-- <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/4.png" style="width: 100px; height: 100px;"> -->
                    <!-- <div class="testimonial-text rounded text-center p-4"> -->
                    <!-- <p>Clita clita tempor justo dolor ipsum amet kasd amet duo justo duo duo labore sed sed. Magna ut diam sit et amet stet eos sed clita erat magna elitr erat sit sit erat at rebum justo sea clita.</p>
                        <h5 class="mb-1">Doner Name</h5>
                        <span class="fst-italic">Profession</span> -->
                    <!-- </div> -->
                </div>
                <!-- <div class="testimonial-item text-center">
                    <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/testimonial-2.jpg" style="width: 100px; height: 100px;">
                    <div class="testimonial-text rounded text-center p-4">
                        <p>Clita clita tempor justo dolor ipsum amet kasd amet duo justo duo duo labore sed sed. Magna ut diam sit et amet stet eos sed clita erat magna elitr erat sit sit erat at rebum justo sea clita.</p>
                        <h5 class="mb-1">Doner Name</h5>
                        <span class="fst-italic">Profession</span>
                    </div>
                </div>
                <div class="testimonial-item text-center">
                    <img class="img-fluid bg-light rounded-circle p-2 mx-auto mb-4" src="img/testimonial-3.jpg" style="width: 100px; height: 100px;">
                    <div class="testimonial-text rounded text-center p-4">
                        <p>Clita clita tempor justo dolor ipsum amet kasd amet duo justo duo duo labore sed sed. Magna ut diam sit et amet stet eos sed clita erat magna elitr erat sit sit erat at rebum justo sea clita.</p>
                        <h5 class="mb-1">Doner Name</h5>
                        <span class="fst-italic">Profession</span>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
    <!-- Testimonial End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-white-50 footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row">
                <div class="col-md-4">
                    <h1 class="fw-bold text-primary mb-4">Book<span class="text-white">Donation</span></h1>
                    <p><i class="fa fa-map-marker-alt me-3"></i>Rangsit University</p>
                    <p><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                    <p><i class="fa fa-envelope me-3"></i>info@example.com</p>
                </div>
                <div class="d-flex pt-2">
                    <a class="btn btn-square me-1" href=""><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-square me-1" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-square me-1" href=""><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/parallax/parallax.min.js"></script>


    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script src="./js/auth.js"></script>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function formatDate(mil) {
        const date = new Date(mil);
        const year = date.getFullYear();
        const month = (date.getMonth() + 1).toString().padStart(2, '0'); // add 1 to adjust for zero-based month indexing and pad with zeros
        const day = date.getDate().toString().padStart(2, '0'); // pad with zeros

        const formattedDate = `${year}-${month}-${day}`; // using string literals

        // Alternatively, using the join() method:
        // const formattedDate = [year, month, day].join('-');

        console.log(formattedDate); // Output: "2023-04-04"
        return formattedDate
    }
    function logout() {
        localStorage.setItem("token", '')
        window.location.reload()
    }
    let global_data = []
    async function getinfo_data() {
        let headersList = {
            "Accept": "*/*",
            "User-Agent": "Thunder Client (https://www.thunderclient.com)",
            "Content-Type": "application/json"
        }

        let bodyContent = JSON.stringify({
            "token": localStorage.getItem('token')
        });

        let response = await fetch(localStorage.getItem('url_endpoint') + "/api/book/count", {
            method: "POST",
            body: bodyContent,
            headers: headersList
        });

        let data = await response.json();
        console.log(data);
        global_data.push(data.import1)
        global_data.push(data.export1)
        global_data.push(data.journal + data.book)
        global_data.push(data.journal)
        global_data.push(data.book)
        all.innerText = data.journal + data.book
        b1.innerText = data.import1
        b2.innerText = data.export1
        b3.innerText = data.journal
        b4.innerText = data.book
        // global_data.book_count = data.book
        // global_data.journal_count = data.journal
        // global_data.book_sum = data.journal + data.book
        // global_data.export = data.export1
        // global_data.import = data.import1

    }
    getinfo_data()
    // Data
    var data = {
        labels: ["หนังสือรับเข้า", "หนังสือรับออก", "หนังสือทั้งหมด", "วรสาร", "หนังสือ"],
        datasets: [{
            data: global_data, // You can adjust the values here to reflect your actual data
            backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#6f7952", "#e05ac5"], // You can set custom colors for each segment
        }]
    };

    // Doughnut Chart
    var doughnutChart = new Chart(document.getElementById("doughnutChart"), {
        type: 'doughnut',
        data: data,
        options: {
            title: {
                display: true,
                text: 'Doughnut Chart Example'
            },
            plugins: {
                doughnutlabel: {
                    labels: [{
                        text: function (context) {
                            var dataset = context.chart.data.datasets[0];
                            var value = dataset.data[context.dataIndex];
                            return value.toString(); // Display count as text
                        },
                        font: {
                            size: '16'
                        }
                    }]
                }
            }
        }
    });

    // Pie Chart
    var pieChart = new Chart(document.getElementById("pieChart"), {
        type: 'pie',
        data: data,
        options: {
            title: {
                display: true,
                text: 'Pie Chart Example'
            },
            plugins: {
                doughnutlabel: {
                    labels: [{
                        text: function (context) {
                            var dataset = context.chart.data.datasets[0];
                            var value = dataset.data[context.dataIndex];
                            return value.toString(); // Display count as text
                        },
                        font: {
                            size: '16'
                        }
                    }]
                }
            }
        }
    });

</script>